export{utils as default};const moisFR=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],joursFR=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],utils={baseURL:window.location.href.split("?")[0].split("#")[0],seed:"sample",security:300,modeDebug:!0,debug:function(){utils.modeDebug&&console.log(arguments)},create:function(type,props){const elt=document.createElement(type);for(const p in props)elt[p]=props[p];return elt},copy(DOMel){let text=DOMel.value;navigator.clipboard.writeText(text).then(()=>{DOMel.className="copied",setTimeout(()=>{DOMel.className=""},3e3)}).catch(err=>{console.log("erreur de copie dans le presse papier")})},pageWidth:()=>null!=window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:null!=document.body?document.body.clientWidth:null,goToOldVersion(){window.location.href=(utils.baseURL+"old/").replace("index.htmlold","old")+/(^.*\/)(.*)/.exec(window.location.href)[2]},checkRadio(name,value){let domElt=document.querySelector("input[type=radio][name='"+name+"'][value='"+value+"']");if(!domElt)return!1;domElt.click()},selectOption(id,value){let domElt=document.getElementById(id);for(let i=0;i<domElt.options.length;i++)if(domElt.options[i].value===value){domElt.selectedIndex=i;break}},getTypeOfURL:url=>url.indexOf("exercices.html")>-1?"paramsexos":url.indexOf("courseauxnombres.html")>-1?"paramscourse":url.indexOf("dominos.html")>-1?"paramsdominos":url.indexOf("duel.html")>-1?"paramsduel":url.indexOf("ceinture.html")>-1?"paramsceinture":"paramsdiapo",countValue(array,value){let count=0;for(let i=0,j=array.length;i<j;i++)array[i]===value&&count++;return count},superEncodeURI:function(url){for(var encodedStr="",encodeChars=["(",")","{","}",",","-"],i=0,len=(url=encodeURIComponent(url)).length;i<len;i++){var hex;if(encodeChars.indexOf(url[i])>=0)encodedStr+="%"+parseInt(url.charCodeAt(i)).toString(16);else encodedStr+=url[i]}return encodedStr},getUrlVars:function(urlString){urlString||(urlString=window.location.href);var vars={},hash;if(urlString.indexOf("#")>0&&urlString.indexOf("?")<0){let idExo=urlString.substring(urlString.indexOf("#")+1,urlString.length);void 0!==MM1toMM2[idExo].new&&(vars.u=MM1toMM2[idExo].new)}var hashes=urlString.replace(/\|/g,"/").slice(urlString.indexOf("?")+1).split("&"),len=hashes.length;if(urlString.indexOf("~")<0)for(var i=0;i<len;i++)vars[(hash=hashes[i].split("="))[0]]=hash[1];else{hash=hashes[0].split(",");for(let i=0;i<hash.length;i++){let data=hash[i].split("=");vars[data[0]]=!!data[1]&&data[1]}vars.c={};for(let i=1;i<len;i++)if(0===hashes[i].indexOf("p")){let parts=hashes[i].split("_"),data=parts[0].split("~"),datas={};for(let j=0;j<data.length;j++){let dataparts=data[j].split("=");datas[dataparts[0]]=decodeURI(dataparts[1])}let id=datas.p;vars.c[id]={i:datas.p,t:datas.t,c:datas.c,o:datas.o,a:{}};for(let j=1;j<parts.length;j++){let datasActivity=parts[j].split("~");vars.c[id].a[j-1]={};for(let k=0;k<datasActivity.length;k++){let dataparts=datasActivity[k].split("=");"o"===dataparts[0]?vars.c[id].a[j-1][dataparts[0]]=utils.textToTable(dataparts[1]):"q"===dataparts[0]?vars.c[id].a[j-1][dataparts[0]]=utils.textToObj(dataparts[1]):vars.c[id].a[j-1][dataparts[0]]=dataparts[1]}}}else if(0===hashes[i].indexOf("embed")){let parts=hashes[i].split("=");vars.embed=parts[1]}}return vars},getDate(){let ladate=new Date,lheure=ladate.getHours(),lesminutes=ladate.getMinutes(),lessecondes=ladate.getSeconds(),ladateComplete;return joursFR[ladate.getDay()]+" "+ladate.getDate()+" "+moisFR[ladate.getMonth()]+" "+ladate.getFullYear()+" - "+(lheure<10?"0"+lheure:lheure)+":"+(lesminutes<10?"0"+lesminutes:lesminutes)+":"+(lessecondes<10?"0"+lessecondes:lessecondes)},timeToSeconds(timeValue){let elems=timeValue.split(":");return 60*Number(elems[0])+Number(elems[1])},seedGenerator:function(){let str="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",code="";for(let i=0;i<6;i++)code+=str[Math.floor(Math.random()*str.length)];return code},addClass:function(elt,newClass){var n=0;newClass=newClass.split(",");for(let i=0;i<newClass.length;i++)-1==(" "+elt.className+" ").indexOf(" "+newClass[i]+" ")&&(elt.className+=" "+newClass[i],n++);return n},getTargetWithImageInside(evt){let target=evt.target;return"img"===evt.target.nodeName.toLowerCase()&&(target=evt.target.parentNode),target},createCeintureTitres(qty){if(qty<1||qty>5)return!1;const dest=document.getElementById("ceintcolumnTitle"),champs=dest.querySelectorAll("input"),labels=dest.querySelectorAll("label"),br=dest.querySelectorAll("br");champs.length<qty?(dest.appendChild(utils.create("br")),dest.appendChild(utils.create("label",{for:"ceinttitlecol"+qty,innerHTML:"Colonne "+qty+" : "})),dest.appendChild(utils.create("input",{type:"text",id:"ceinttitlecol"+qty,placeholder:"Texte, ou rien"}))):champs.length>qty&&(dest.removeChild(labels[champs.length-1]),dest.removeChild(champs[champs.length-1]),dest.removeChild(br[champs.length-1]))},getRadioChecked:function(name){let radio=document.getElementsByName(name);for(let i=0,length=radio.length;i<length;i++)if(radio[i].checked)return radio[i].value;return!1},getSelectValue:function(id){try{let select=document.getElementById(id);return select[select.selectedIndex].value}catch(err){console.log(err)}},numberIfNumber:function(value){return String(Number(value))===value?Number(value):value},isEmpty:function(obj){var x;for(x in obj)return!1;return!0},shuffle:function(arr){if(!Array.isArray(arr))return!1;let curId=arr.length;for(;0!==curId;){let randId=Math.floor(utils.alea()*curId);curId-=1;let tmp=arr[curId];arr[curId]=arr[randId],arr[randId]=tmp}return arr},deploy(elt){let destClass="hideup",eltClass="pointer plus";if("H3"===elt.nodeName){let dest=elt.nextSibling;elt.className===eltClass&&(eltClass="pointer moins",destClass="showdown"),elt.className=eltClass,dest.className=destClass}else if("H2"===elt.nodeName)for("pointer plus"===elt.className&&(eltClass="pointer moins",destClass="showdown"),elt.className=eltClass;null!==elt.nextSibling&&"H2"!==(elt=elt.nextSibling).nodeName;)"UL"===elt.nodeName?elt.className=destClass:"H3"===elt.nodeName&&(elt.className=eltClass);else if("H1"===elt.nodeName){"pointer plus"===elt.className&&(eltClass="pointer moins",destClass="showdown"),elt.className=eltClass;const h2=document.querySelectorAll("#resultat-chercher h2"),h3=document.querySelectorAll("#resultat-chercher h3"),ul=document.querySelectorAll("#resultat-chercher ul");h2.forEach(el=>el.className=eltClass),h3.forEach(el=>el.className=eltClass),ul.forEach(el=>el.className=destClass)}},tableToText:array=>void 0===array?"":"string"==typeof array?array:array.join(","),textToTable:string=>void 0===string||""===string?[]:string.split(",").map(Number),objToText(obj){if(void 0===obj)return"";let string="",start=!0;for(const i in obj)start?(string+=i+"."+utils.tableToText(obj[i]),start=!1):string+="-"+i+"."+utils.tableToText(obj[i]);return string},textToObj(string){let obj={},elts=string.split("-");for(let i=0;i<elts.length;i++){let subelts=elts[i].split(".");obj[subelts[0]]=utils.textToTable(subelts[1])}return obj},removeClass:function(elt,className){elt.classList.remove(className)},checkSecurity:()=>(utils.security--,!(utils.security<0)||(console.log("infinite loop"),!1)),toDecimalFr:function(value){let parties=value.split("."),partieEntiere=parties[0],partieDecimale="";if(parties.length>1&&(partieDecimale=parties[1]),partieEntiere.length>3){let s=partieEntiere.length%3;partieEntiere=partieEntiere.substring(0,s)+"~"+partieEntiere.substring(s).match(/\d{3}/g).join("~")}if(partieDecimale.length>3){let nbgp=~~(partieDecimale.length/3);partieDecimale=partieDecimale.match(/\d{3}/g).join("~")+"~"+partieDecimale.substring(3*nbgp)}return partieDecimale.length&&(partieDecimale="{,}"+partieDecimale),partieEntiere+partieDecimale},mathRender:function(wtarget){let contents;if(["enonce-content","corrige-content","activityOptions","activityDescription"].forEach(id=>{let content=document.getElementById(id).innerHTML;document.getElementById(id).innerHTML=content.replace(/\$\$([^$]*)\$\$/gi,'<span class="math">$1</span>')}),document.querySelectorAll(".slide").forEach(elt=>{elt.innerHTML=elt.innerHTML.replace(/\$\$([^$]*)\$\$/gi,'<span class="math">$1</span>')}),void 0!==wtarget){let content=wtarget.document.getElementById("creator-content");content.innerHTML=content.innerHTML.replace(/\$\$([^$]*)\$\$/gi,'<span class="math">$1</span>'),content.querySelectorAll(".math").forEach((function(item){var texTxt=item.innerHTML.replace(/\&amp\;/g,"&");let nbrgx=/(\d+\.*\d*)/g;texTxt=texTxt.replace(nbrgx,utils.toDecimalFr);try{katex.render(texTxt,item,{throwOnError:!1,errorColor:"#FFF",colorIsTextColor:!0}),utils.removeClass(item,"math")}catch(err){item.innerHTML="<span class='err'>"+err+" avec "+texTxt+"</span>"}}))}document.querySelectorAll(".math").forEach((function(item){var texTxt=item.innerHTML.replace(/\&amp\;/g,"&");let nbrgx=/(\d+\.*\d*)/g;texTxt=texTxt.replace(nbrgx,utils.toDecimalFr);try{katex.render(texTxt,item,{throwOnError:!1,errorColor:"#FFF",colorIsTextColor:!0}),utils.removeClass(item,"math")}catch(err){item.innerHTML="<span class='err'>"+err+" avec "+texTxt+"</span>"}}))},clone:someThing=>void 0!==someThing&&("object"==typeof someThing?JSON.parse(JSON.stringify(someThing)):someThing),toDigits(value,digits){let puissance=Number("1e"+digits)-1;for(;String(value).length<String(puissance).length;)value="0"+value;return value}};