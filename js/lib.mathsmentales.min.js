String.prototype.minusculesSansAccent=function(){for(var accent=[/[\300-\306]/g,/[\340-\346]/g,/[\310-\313]/g,/[\350-\353]/g,/[\314-\317]/g,/[\354-\357]/g,/[\322-\330]/g,/[\362-\370]/g,/[\331-\334]/g,/[\371-\374]/g,/[\321]/g,/[\361]/g,/[\307]/g,/[\347]/g],noaccent=["A","a","E","e","I","i","O","o","U","u","N","n","C","c"],str=this,i=0;i<accent.length;i++)str=str.replace(accent[i],noaccent[i]);return str.toLowerCase()},Array.prototype.indexOfForArrays=function(search){var searchJson=JSON.stringify(search),arrJson;return this.map(JSON.stringify).indexOf(searchJson)},Array.prototype.removeValue=function(value){let index=this.indexOf(value);return index>-1&&(this.splice(index,1),!0)},Array.prototype.getKeys=function(){let table=[];for(let i=0,j=this.length;i<j;i++)table.push(i);return table},String.prototype.shuffle=function(){return this.split("").sort((function(a,b){return Math.random()<.5?1:-1})).join("")};var moisFR=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],joursFR=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],modeDebug=!0;utils={seed:"sample",security:300,addClass:function(elt,newClass){var n=0;newClass=newClass.split(",");for(let i=0;i<newClass.length;i++)-1==(" "+elt.className+" ").indexOf(" "+newClass[i]+" ")&&(elt.className+=" "+newClass[i],n++);return n},getRadioChecked:function(name){let radios;for(let i=0,length=document.getElementsByName(name).length;i<length;i++)if(radio[i].checked)return radio[i].value;return!1},removeClass:function(elt,className){if((" "+elt.className+" ").indexOf(" "+className+" ")>-1){var classes=elt.className.split(" "),newclasses="";for(let i=0;i<classes.length;i++)classes[i]!==className&&(newclasses+=" "+classes[i]);elt.className=newclasses.trim()}},changeTempoValue:function(value){document.getElementById("tempo-value").innerHTML=value+" s.",MM.editedActivity&&MM.editedActivity.setTempo(value),MM.carts[MM.selectedCart].editedActivityId>-1&&(document.querySelectorAll("#cart"+(MM.selectedCart+1)+"-list li.active span")[0].innerHTML=value)},changeNbqValue:function(value){document.getElementById("nbq-value").innerHTML=value,MM.editedActivity&&MM.editedActivity.setNbq(value),MM.carts[MM.selectedCart].editedActivityId>-1&&(document.querySelectorAll("#cart"+(MM.selectedCart+1)+"-list li.active span")[1].innerHTML=value)},checkValues:function(){utils.changeTempoValue(document.getElementById("tempo-slider").value),utils.changeNbqValue(document.getElementById("nbq-slider").value)},checkSecurity:()=>(utils.security--,!(utils.security<0)||(console.log("infinite loop"),!1)),initializeAlea:function(seed){utils.seed=seed,utils.alea=new Math.seedrandom(utils.seed)},aleaInt:function(min,max){let qty=1,avoid=[];utils.security=300;for(let i=2;i<arguments.length;i++)"number"==typeof arguments[i]?qty=arguments[i]:"string"==typeof arguments[i]&&"^"==arguments[i][0]&&(avoid=arguments[i].substring(1).split(","));if(min===max)return min;if(max<min&&([min,max]=[max,min]),qty>1){var integers=[];for(let i=0;i<qty;i++){let thisint=math.round(utils.alea()*(max-min))+min;if(avoid.indexOf(thisint)>-1){if(i--,!utils.checkSecurity())break}else if(integers.push(thisint),!utils.checkSecurity())break}return modeDebug&&console.log("AleaInt array : "+integers),integers}{let thisint;do{if(thisint=math.round(utils.alea()*(max-min))+min,!utils.checkSecurity())break}while(avoid.indexOf(thisint)>-1);return modeDebug&&console.log("AleaInt 1 int : "+thisint),thisint}},aleaFloat:function(min,max,precision){let qty=1,avoid=[];utils.security=300,modeDebug&&console.log(arguments);for(let i=3;i<arguments.length;i++)"number"==typeof arguments[i]?qty=arguments[i]:"string"==typeof arguments[i]&&"^"===arguments[i][0]&&(avoid=arguments[i].substring(1).split(",").map(Number));if(max<min&&([min,max]=[max,min]),qty>1){let nb;var floats=[];for(let i=0;i<qty;i++)if(nb=precision>=0?math.round(utils.alea()*(max-min)+min,precision):Number(math.round(Number(utils.alea()*(max-min)+min+"e"+precision))+"e"+-precision),avoid.indexOf(nb)>-1){if(i--,!utils.checkSecurity())break}else if(floats.push(nb),security<0)break;return modeDebug&&console.log(floats),floats}{let nb;do{if(nb=precision>=0?math.round(utils.alea()*(max-min)+min,precision):Number(math.round(Number(utils.alea()*(max-min)+min+"e"+precision))+"e"+-precision),!utils.checkSecurity())break;console.log(nb)}while(avoid.indexOf(nb)>-1);return nb}},signedNumber:function(nb){return 0===nb?"":nb>0?"+"+nb:nb},signIfOne:function(nb){return 1===nb?"":-1===nb?"-":nb},showTab:function(element){utils.resetAllTabs(),utils.addClass(element,"is-active");var tab=element.getAttribute("href").substr(1);document.getElementById(tab).style.display=""},resetAllTabs:function(){let tabsButtons=document.querySelectorAll("#header-menu .tabs-menu-link"),contents;document.querySelectorAll(".tabs-content-item").forEach(element=>{element.style.display="none"}),tabsButtons.forEach(element=>{utils.removeClass(element,"is-active")})},mathRender:function(){document.querySelectorAll(".math").forEach((function(item){var texTxt=item.innerHTML;texTxt=texTxt.replace(/\./g,"{,}");try{katex.render(texTxt,item,{throwOnError:!1,errorColor:"#FFF"}),utils.removeClass(item,"math")}catch(err){item.innerHTML="<span class='err'>"+err+" avec "+texTxt+"</span>"}}))},clone:someThing=>void 0!==someThing&&("object"==typeof someThing?JSON.parse(JSON.stringify(someThing)):someThing)},window.onload=function(){let tabsButtons;MM.resetCarts(),document.querySelectorAll("#header-menu .tabs-menu-link").forEach(element=>{element.onclick=function(){utils.showTab(element)}}),utils.checkValues(),utils.resetAllTabs(),utils.initializeAlea(Date()),activitiesArray.forEach((function(element,index){let ol=document.getElementById("actlist"),li=document.createElement("li");li.onclick=function(){library.open(index)},li.innerText=element.title,ol.appendChild(li)})),MM.setDispositionEnonce(MM.getDispositionEnonce())};class cart{constructor(id){this.id=id,this.end="correction",this.introduction="countdown",this.activities=[],this.sortable=void 0,this.editedActivityId=-1}setEndValue(value){this.end=value}setIntroduction(value){this.introduction=value}addActivity(obj){this.editedActivityId=-1;let temp=new activity(obj);this.activities.push(temp),this.display()}removeActivity(index){this.activities.splice(index,1),this.display()}exchange(oldIndex,newIndex){let indexes=this.activities.getKeys();console.log(indexes);let tempindexes=indexes[oldIndex],temp=this.activities[oldIndex];this.activities.splice(oldIndex,1),indexes.splice(oldIndex,1),this.activities.splice(newIndex,0,temp),indexes.splice(newIndex,0,tempindexes),this.editedActivityId=indexes.indexOf(this.editedActivityId),this.display()}display(){let dom=document.getElementById("cart"+(MM.selectedCart+1)+"-list");dom.innerHTML="";for(let i=0,l=this.activities.length;i<l;i++){let li=document.createElement("li"),activity=this.activities[i];li.innerHTML="<img src='img/editcart.png' align='left' onclick='MM.editActivity("+i+")'>"+activity.title+" | <span>"+activity.tempo+"</span> s. | <span>"+activity.nbq+"</span> questions",MM.carts[MM.selectedCart].editedActivityId===i&&(li.className="active"),dom.appendChild(li)}this.sortable=new Sortable(dom,{animation:150,ghostClass:"ghost-movement",onEnd:function(evt){MM.carts[MM.selectedCart].exchange(evt.oldIndex,evt.newIndex)}})}}class steps{constructor(obj){this.step=0,this.size=obj.size,this.contener=obj.contener}addSize(value){this.size+=value}html(){let ul=document.createElement("ul");ul.className="steps is-balanced has-gaps is-horizontal has-content-above has-content-centered";for(let i=0;i<this.size;i++){let li=document.createElement("li");li.className="steps-segment";let span=document.createElement("span");if(i===this.step){span.className="steps-marker is-hollow",li.appendChild(span);let div=document.createElement("div");div.className="steps-content",div.innerHTML=this.step+1,li.appendChild(div),li.className+=" is-active"}else span.className="steps-marker",li.appendChild(span);ul.appendChild(li)}if(this.contener.hasChildNodes()){let node=this.contener.childNodes[0];this.contener.replaceChild(ul,node)}else this.contener.appendChild(ul)}nextStep(){this.step++,this.html()}}MM={selectedCart:0,editedActivity:void 0,slidersOrientation:"",carts:[],steps:[],editActivity:function(index){MM.editedActivity=MM.carts[MM.selectedCart].activities[index],MM.setTempo(MM.editedActivity.tempo),MM.setNbq(MM.editedActivity.nbq),MM.carts[MM.selectedCart].editedActivityId=index,MM.carts[MM.selectedCart].display(),MM.editedActivity.display(),document.getElementById("addToCart").className="hidden",document.getElementById("removeFromCart").className=""},setTempo:function(value){document.getElementById("tempo-slider").value=value,document.getElementById("tempo-value").innerHTML=value+" s."},setNbq:function(value){document.getElementById("nbq-slider").value=value,document.getElementById("nbq-value").innerHTML=value},resetCarts:function(){let Cart=new cart(0);MM.carts=[Cart],MM.steps=[]},addCart:function(){let cartsNb=MM.carts.length+1;if(cartsNb>4)return!1;MM.carts[cartsNb-1]=new cart(cartsNb-1);let button=document.createElement("button");button.value=cartsNb,button.className="tabs-menu-link",button.innerHTML='<img src="img/cart'+cartsNb+'.png">',button.id="button-cart"+cartsNb,button.onclick=function(elt){let value="";value="img"===elt.target.nodeName.toLowerCase()?elt.target.parentNode.value:elt.target.value,MM.showCart(value)};let addcart=document.getElementById("addcart"),cartsMenu=document.getElementById("cartsMenu"),lastButton=cartsMenu.removeChild(addcart);cartsMenu.appendChild(button).click(),cartsNb<4&&cartsMenu.appendChild(lastButton)},removeCart:function(index){if(!window.confirm("Vous êtes sur le points de supprimer ce panier.\nConfirmez-vous ?"))return!1;let buttonCartToremove=document.getElementById("button-cart"+MM.carts.length),cartsMenu=document.getElementById("cartsMenu");if(cartsMenu.removeChild(buttonCartToremove),!document.getElementById("addcart")){let buttonAddCart=document.createElement("button");buttonAddCart.id="addcart",buttonAddCart.innerHTML='<img src="img/cartadd.png">',buttonAddCart.onclick=function(){MM.addCart()},cartsMenu.appendChild(buttonAddCart)}MM.carts.splice(index-1,1),MM.showCart(1)},showCart(index){index=Number(index),MM.selectedCart=index-1;for(let i=1,nb=MM.carts.length,btn;i<=4;i++){i<=nb&&(btn=document.getElementById("button-cart"+i));let div=document.getElementById("cart"+i);i!==index?(div.className="hidden",i<=nb&&utils.removeClass(btn,"is-active")):(div.className="cartcontent",i<=nb&&utils.addClass(btn,"is-active"))}MM.carts[MM.selectedCart].editedActivityId>-1&&MM.carts[MM.selectedCart].activities[MM.carts[MM.selectedCart].editedActivityId].display()},emptyCart(index){if(!window.confirm("Vous êtes sur le point de vider ce panier.\nConfirmez-vous ?"))return!1;MM.carts[index-1].activities=[],MM.carts[index-1].editedActivityId=-1,document.getElementById("cart"+index+"-list").innerHTML=""},addToCart(){MM.carts[MM.selectedCart].addActivity(MM.editedActivity)},removeFromCart(){let cart=MM.carts[MM.selectedCart];cart.removeActivity(cart.editedActivityId),cart.editedActivityId=-1,document.getElementById("addToCart").className="",document.getElementById("removeFromCart").className="hidden"},populateQuestionsAndAnswers:function(){let enonces=document.getElementById("enonce-content"),corriges=document.getElementById("corrige-content");enonces.innerHTML="",corriges.innerHTML="";for(let i=0,length=MM.carts.length;i<length;i++){let slider=document.getElementById("slider"+i);MM.steps[i]=new steps({size:0,contener:slider}),MM.carts[i].activities.forEach(element=>{element.generate(),MM.steps[i].addSize(element.nbq);for(let j=0;j<element.questions.length;j++){let div=document.createElement("div");div.className="slide w3-animate-top",div.id="slide"+i+"-"+j;let span=document.createElement("span"),li=document.createElement("li"),li2=document.createElement("li");li.className="math",li2.className="math",span.className="math";let question=element.questions[j];Array.isArray(element.questions[j])&&(question=element.questions[j][utils.aleaInt(0,element.questions[j].length-1)]),li.innerHTML=question,span.innerHTML=question,div.append(span),slider.appendChild(div),enonces.append(li),li2.innerHTML=element.answers[j],corriges.append(li2)}}),MM.steps[i].html()}utils.mathRender()},start:function(){MM.resetCarts(),MM.carts[0].addActivity(MM.editedActivity),MM.createSlideShows(),MM.populateQuestionsAndAnswers(),MM.showSlideShows()},showQuestions:function(){MM.resetCarts(),MM.carts[0].addActivity(MM.editedActivity),MM.createSlideShows(),MM.populateQuestionsAndAnswers(),utils.showTab(document.querySelector("[href='#tab-enonce'].tabs-menu-link"))},showAnswers:function(){MM.resetCarts(),MM.carts[0].addActivity(MM.editedActivity),MM.createSlideShows(),MM.populateQuestionsAndAnswers(),utils.showTab(document.querySelector("[href='#tab-corrige'].tabs-menu-link"))},createSlideShows:function(){let nb=MM.carts.length,contener=document.getElementById("slideshow");modeDebug&&console.log(nb,contener),contener.innerHTML="","vertical"===MM.slidersOrientation?contener.className="hidden vertical":contener.className="hidden";for(let i=0;i<nb;i++){let div=document.createElement("div");div.id="slider"+i,div.className=1===nb?"slider-1":2===nb?"slider-2":"slider-34",contener.appendChild(div)}},showSlideShows:function(){document.getElementById("slideshow").className=""},getDispositionEnonce:function(){let radios=document.querySelectorAll("input[name='Enonces']");for(let i=0,j=radios.length;i<j;i++)if(radios[i].checked)return i+1},setDispositionEnonce:function(value){if(1===value)document.getElementById("sddiv1").className="sddiv1",document.getElementById("sddiv2").className="hidden",document.getElementById("sddiv3").className="hidden",document.getElementById("sddiv4").className="hidden",document.getElementById("divisionsOption").className="hidden",document.getElementById("onlinechoice").className="",MM.setDispositionDoubleEnonce("h");else if(2===value){let directions;document.querySelectorAll("input[name='direction']")[0].checked?MM.setDispositionDoubleEnonce("h"):MM.setDispositionDoubleEnonce("v"),document.getElementById("sddiv1").className="sddiv2",document.getElementById("sddiv2").className="sddiv2",document.getElementById("sddiv3").className="hidden",document.getElementById("sddiv4").className="hidden",document.getElementById("divisionsOption").className="",document.querySelector("input[name='online'][value='no']").checked=!0,document.getElementById("onlinechoice").className="hidden"}else 3===value?(document.getElementById("sddiv1").className="sddiv34",document.getElementById("sddiv2").className="sddiv34",document.getElementById("sddiv3").className="sddiv34",document.getElementById("sddiv4").className="hidden",document.getElementById("divisionsOption").className="hidden",document.querySelector("input[name='online'][value='no']").checked=!0,document.getElementById("onlinechoice").className="hidden",MM.setDispositionDoubleEnonce("h")):4===value&&(document.getElementById("sddiv1").className="sddiv34",document.getElementById("sddiv2").className="sddiv34",document.getElementById("sddiv3").className="sddiv34",document.getElementById("sddiv4").className="sddiv34",document.getElementById("onlinechoice").className="hidden",document.querySelector("input[name='online'][value='no']").checked=!0,document.getElementById("divisionsOption").className="hidden",MM.setDispositionDoubleEnonce("h"))},setDispositionDoubleEnonce:function(option){"h"===option?(MM.slidersOrientation="horizontal",document.getElementById("screen-division").className=""):(MM.slidersOrientation="vertical",document.getElementById("screen-division").className="vertical",document.querySelector("input[name='direction'][value='v']").checked=!0)}},library={open:function(objId){let obj=new activity(activitiesArray[objId]);MM.editedActivity=obj;var tab=document.querySelector("a[href$='parameters'].tabs-menu-link");utils.resetAllTabs(),utils.addClass(tab,"is-active"),document.getElementById("tab-parameters").style.display="",document.getElementById("addToCart").className="",document.getElementById("removeFromCart").className="hidden",obj.display()}};class activity{constructor(obj){this.id=obj.id||obj.ID,this.title=obj.title,this.description=obj.description,this.vars=obj.vars,this.options=utils.clone(obj.options)||void 0,this.questionPatterns=utils.clone(obj.questionPatterns)||obj.question,this.answerPatterns=utils.clone(obj.answerPatterns)||obj.answer,this.valuePatterns=utils.clone(obj.valuePatterns)||obj.value,this.questions=utils.clone(obj.questions)||[],this.answers=utils.clone(obj.answers)||[],this.values=utils.clone(obj.values)||[],this.chosenOptions=utils.clone(obj.chosenOptions)||[],this.chosenQuestions=utils.clone(obj.chosenQuestions)||{},this.chosenQuestionTypes=utils.clone(obj.chosenQuestionTypes)||[],this.tempo=utils.clone(obj.tempo)||Number(document.getElementById("tempo-slider").value),this.nbq=utils.clone(obj.nbq)||Number(document.getElementById("nbq-slider").value)}initialize(){this.questions=[],this.answers=[],this.values=[]}setTempo(value){this.tempo=Number(value)}setNbq(value){this.nbq=Number(value)}getOption(){return 0===this.chosenOptions.length&&this.options?utils.aleaInt(0,this.options.length-1):this.chosenOptions.length>0&&this.chosenOptions[utils.aleaInt(0,this.chosenOptions.length-1)]}display(){this.initialize(),document.getElementById("activityTitle").innerHTML=this.title,this.description&&(document.getElementById("activityDescription").innerHTML=this.description);var examples=document.getElementById("activityOptions");if(examples.innerHTML="",utils.initializeAlea("sample"),void 0!==this.options&&this.options.length>0){let colors=[""," red"," orange"," blue"," green"," grey"];for(let i=0;i<this.options.length;i++){this.generate(1,i,!1),examples.innerHTML+="<p><input id='o"+i+"' class='checkbox"+colors[i%colors.length]+"' type='checkbox' value='"+i+"' onclick='MM.editedActivity.setOption(this.value, this.checked);'"+(this.chosenOptions.indexOf(i)>-1?"checked":"")+"> "+this.options[i].name+" :";let ul=document.createElement("ul");if(Array.isArray(this.questions[0]))for(let jj=0;jj<this.questions[0].length;jj++){let li=document.createElement("li"),checked="";this.chosenQuestions[i]&&this.chosenQuestions[i].indexOf(jj)>-1&&(checked="checked"),li.innerHTML="<input class='checkbox"+colors[i%colors.length]+"' type='checkbox' id='o"+i+"-"+jj+"' value='"+i+"-"+jj+"' onclick='MM.editedActivity.setOption(this.value, this.checked);'"+checked+"> <span class='math'>"+this.questions[0][jj]+"</span>",ul.appendChild(li)}else{let li=document.createElement("li");li.innerHTML="<span class='math'>"+this.questions[0]+"</span></p>",ul.appendChild(li)}examples.appendChild(ul)}}else{this.generate(1);let ul=document.createElement("ul");if(Array.isArray(this.questions[0]))for(let jj=0;jj<this.questions[0].length;jj++){let li=document.createElement("li");li.innerHTML="<input type='checkbox' class='checkbox' value='"+jj+"' onclick='MM.editedActivity.setQuestionType(this.value, this.checked);' ><span class='math'>"+this.questions[0][jj]+"</span>",ul.appendChild(li)}else{let li=document.createElement("li");li.innerHTML="<span class='math'>"+this.questions[0]+"</span></p>",ul.appendChild(li)}examples.appendChild(ul),examples.innerHTML+="<p><span class='math'>"+this.answers[0]+"</span></p>"}utils.mathRender()}getPattern(option){return this.chosenQuestionTypes.length>0?this.chosenQuestionTypes[utils.aleaInt(0,this.chosenQuestionTypes.length-1)]:!1!==option&&(Array.isArray(this.chosenQuestions[option])?0===this.chosenQuestions[option].length&&Array.isArray(this.options[option].question)?utils.aleaInt(0,this.options[option].question.length-1):this.chosenQuestions[option].length>0&&this.chosenQuestions[option][utils.aleaInt(0,this.chosenQuestions[option].length-1)]:(this.chosenQuestions[option]=[],!1))}setOption(value,check){var optionId,renderId;if(value.indexOf("-")>-1){let Ids=value.split("-");optionId=Number(Ids[0]),renderId=Number(Ids[1]),check?(document.getElementById("o"+optionId).checked=!0,this.chosenOptions.indexOf(optionId)<0&&this.chosenOptions.push(optionId),Array.isArray(this.chosenQuestions[optionId])?this.chosenQuestions[optionId].indexOf(renderId)<0&&this.chosenQuestions[optionId].push(renderId):this.chosenQuestions[optionId]=[renderId]):this.chosenQuestions[optionId].removeValue(renderId)&&0===this.chosenQuestions[optionId].length&&(this.chosenOptions.removeValue(optionId),document.getElementById("o"+optionId).checked=!1)}else if(optionId=Number(value),check){if(this.chosenOptions.indexOf(optionId)<0&&this.chosenOptions.push(optionId),this.chosenQuestions[optionId]=[],"object"==typeof this.options[optionId].question)for(let i=0;i<this.options[optionId].question.length;i++)this.chosenQuestions[optionId].push(i),document.getElementById("o"+optionId+"-"+i).checked=!0;else if(Array.isArray(this.questionPatterns))for(let i=0;i<this.questionPatterns.length;i++)this.chosenQuestions[optionId].push(i),document.getElementById("o"+optionId+"-"+i).checked=!0}else if(this.chosenOptions.removeValue(optionId))if("object"==typeof this.options[optionId].question){for(let i=0;i<this.options[optionId].question.length;i++)document.getElementById("o"+optionId+"-"+i).checked=!1;delete this.chosenQuestions[optionId]}else if(Array.isArray(this.questionPatterns)){for(let i=0;i<this.questionPatterns.length;i++)document.getElementById("o"+optionId+"-"+i).checked=!1;delete this.chosenQuestions[optionId]}}setQuestionType(value,check){modeDebug&&console.log(value,check);let questionId=Number(value);check?this.chosenQuestionTypes.indexOf(questionId)<0&&(modeDebug&&console.log("chosenQuestionTypes add "+questionId),this.chosenQuestionTypes.push(questionId)):(modeDebug&&console.log("chosenQuestionTypse remove "+questionId),this.chosenQuestionTypes.removeValue(questionId))}replaceVars(chaine,index){for(const c in this.wVars){let regex=new RegExp(":"+c,"g");chaine=chaine.replace(regex,"this.wVars['"+c+"']")}if(void 0!==index){let regex=new RegExp(":question","g");chaine=chaine.replace(regex,this.questions[index])}return chaine.replace(/\\/g,"\\\\")}generate(n,opt,patt){let option,pattern;void 0===n&&(n=this.nbq),this.wVars={};for(let i=0;i<n;i++){option=void 0===opt?this.getOption():opt,pattern=void 0===patt?this.getPattern(option):patt,modeDebug&&console.log("option choisie : "+option,"Pattern choisi : "+pattern),!1!==option?(void 0===this.options[option].vars?this.cVars=this.vars:this.cVars=this.options[option].vars,!1!==pattern?void 0!==this.options[option].question?this.cQuestion=this.options[option].question[pattern]:this.cQuestion=this.questionPatterns[pattern]:void 0===this.options[option].question?this.cQuestion=this.questionPatterns:this.cQuestion=this.options[option].question,void 0===this.options[option].answer?this.cAnswer=this.answerPatterns:this.cAnswer=this.options[option].answer,void 0===this.options[option].value?this.cValue=this.valuePatterns:this.cValue=this.options[option].value):(this.cVars=this.vars,this.cQuestion=!1!==pattern?this.questionPatterns[pattern]:this.questionPatterns,this.cAnswer=this.answerPatterns,this.cValue=this.valuePatterns);for(const name in this.cVars)if(this.wVars[name]=this.cVars[name],"string"==typeof this.wVars[name]&&this.wVars[name].indexOf("${")>-1&&(this.wVars[name]=eval("`"+this.replaceVars(this.wVars[name])+"`")),"object"==typeof this.wVars[name])this.wVars[name]=this.wVars[name][utils.aleaInt(0,this.wVars[name].length-1)];else if("string"==typeof this.wVars[name]&&this.wVars[name].indexOf("_")>-1){var bornes=this.wVars[name].split("_");void 0===bornes[2]||bornes[2].indexOf("^")>-1?this.wVars[name]=utils.aleaInt(Number(bornes[0]),Number(bornes[1]),bornes[2]):this.wVars[name]=utils.aleaFloat(Number(bornes[0]),Number(bornes[1]),Number(bornes[2]),bornes[3])}if(modeDebug&&console.log(this.wVars),"string"==typeof this.cQuestion)this.questions[i]=eval("`"+this.replaceVars(this.cQuestion)+"`");else if("object"==typeof this.cQuestion){this.questions[i]=[];for(let jj=0;jj<this.cQuestion.length;jj++)this.questions[i].push(eval("`"+this.replaceVars(this.cQuestion[jj])+"`"))}if("string"==typeof this.cAnswer)this.answers[i]=eval("`"+this.replaceVars(this.cAnswer,i)+"`");else if("object"==typeof this.cAnswer){this.answers[i]=[];for(let jj=0;jj<this.cAnswer.length;jj++)this.answers[i].push(eval("`"+this.replaceVars(this.cAnswer[jj],i)+"`"))}if("string"==typeof this.cValue)this.values[i]=eval("`"+this.replaceVars(this.cValue)+"`");else if("object"==typeof this.cValue){this.values[i]=[];for(let kk=0;kk<this.cValue.length;kk++)this.values[i][kk]=eval("`"+this.replaceVars(this.cValue[kk])+"`")}}}}activitiesArray=[{title:"Tables de Multiplications",ID:"mult",options:[{name:"Petites",vars:{a:"1_4",b:"1_4"}},{name:"Moyennes",vars:{a:"5_7",b:"5_7"}}],question:["\\bold{${:a}}\\times${:b}","${:b}\\times\\bold{${:a}}"],answer:":question=\\color{red}{${:a*:b}}",value:"${:a*:b}"},{title:"Conversions vers les unités de base",ID:"convBase",options:[{name:"m",vars:{q:"m",k:[["km",1e3],["hm",100],["dam",10],["dm",.1],["cm",.01],["mm",.001]],p:[[0,0],[-1,10],[-2,100],[-3,1e3]],z:"${:p[0]}_3",x:"0_${:p[1]}_${:z}_^0"}},{name:"L",vars:{q:"L",k:[["hL",100],["daL",10],["dL",.1],["cL",.01],["mL",.001]],p:[[0,0],[-1,10],[-2,100],[-3,1e3]],z:"${:p[0]}_3",x:"0_${:p[1]}_${:z}_^0"}},{name:"g",vars:{q:"g",k:[["kg",1e3],["hg",100],["dag",10],["dg",.1],["cg",.01],["mg",.001]],p:[[0,0],[-1,10],[-2,100],[-3,1e3]],z:"${:p[0]}_3",x:"0_${:p[1]}_${:z}_^0"}}],description:"Conversions des multiples et sous-multiples des m, L et g vers les m, L et g",question:"\\text{Convertir } ${:x} \\text{ ${:k[0]} en }\\color{blue}\\text{${:q}}",answer:"${:x} \\text{ ${:k[0]}} = \\color{red}{${math.round(:x*:k[1],7)}\\text{ ${:q}}}",value:"${math.round(:x*:k[1],7)}\\text{ ${:q}}"},{title:"Développer une identité remarquable",ID:"devIdRem",vars:{a:"1_10",b:"2_10",c:["u","v","t","x","y","z"]},options:[{name:"(ax+b)²",question:["(${utils.signIfOne(:a)}${:c}+${:b})^2","(${:b}+${utils.signIfOne(:a)}${:c})^2"],answer:":question=\\color{red}{${utils.signIfOne(math.pow(:a,2))}${:c}^2+${math.multiply(2,:a,:b)}${:c}+${math.pow(:b,2)}}",value:"${utils.signIfOne(math.pow(:a,2))}${:c}^2+${math.multiply(2,:a,:b)}${:c}+${math.pow(:b,2)}"},{name:"(ax-b)²",question:["(${utils.signIfOne(:a)}${:c}-${:b})^2","(${:b}-${utils.signIfOne(:a)}${:c})^2"],answer:":question=\\color{red}{${utils.signIfOne(math.pow(:a,2))}${:c}^2-${math.multiply(2,:a,:b)}${:c}+${math.pow(:b,2)}}",value:"${utils.signIfOne(math.pow(:a,2))}${:c}^2-${math.multiply(2,:a,:b)}${:c}+${math.pow(:b,2)}"},{name:"(ax-b)(ax+b)",question:["(${utils.signIfOne(:a)}${:c}-${:b})(${utils.signIfOne(:a)}${:c}+${:b})","(${utils.signIfOne(:a)}${:c}-${:b})(${:b}+${utils.signIfOne(:a)}${:c})","(${utils.signIfOne(:a)}${:c}+${:b})(${utils.signIfOne(:a)}${:c}-${:b})","(${:b}+${utils.signIfOne(:a)}${:c})(${utils.signIfOne(:a)}${:c}-${:b})"],answer:":question=\\color{red}{${utils.signIfOne(math.pow(:a,2))}${:c}^2-${math.pow(:b,2)}}",value:"${utils.signIfOne(math.pow(:a,2))}${:c}^2-${math.pow(:b,2)}"}]},{title:"Factoriser avec les identités remarquables",ID:"factIR",vars:{k:"1_10",b:"1_10",c:["u","v","t","x","y","z"]},options:[{name:"ax²+2abx+b²",question:["${utils.signIfOne(math.pow(:k,2))+:c}^2+${(2*:k*:b)+:c}+${math.pow(:b,2)}","${utils.signIfOne(math.pow(:k,2))+:c}^2+${math.pow(:b,2)}+${(2*:k*:b)+:c}","${(2*:k*:b)+:c}+${utils.signIfOne(math.pow(:k,2))+:c}^2+${math.pow(:b,2)}"],answer:":question=\\color{red}{(${utils.signIfOne(:k)+:c}+${:b})^2}",value:"(${utils.signIfOne(:k)+:c}+${:b})^2"},{name:"a²-2abx+b²",question:["${utils.signIfOne(math.pow(:k,2))+:c}^2-${(2*:k*:b)+:c}+${math.pow(:b,2)}","${utils.signIfOne(math.pow(:k,2))+:c}^2+${math.pow(:b,2)}-${(2*:k*:b)+:c}","-${(2*:k*:b)+:c}+${utils.signIfOne(math.pow(:k,2))+:c}^2+${math.pow(:b,2)}"],answer:":question=\\color{red}{(${utils.signIfOne(:k)+:c}-${:b})^2}",value:"(${utils.signIfOne(:k)+:c}-${:b})^2"},{name:"a²-b²",question:["${utils.signIfOne(math.pow(:k,2))+:c}^2-${math.pow(:b,2)}","${math.pow(:b,2)}-${utils.signIfOne(math.pow(:k,2))+:c}^2"],answer:":question=\\color{red}{(${utils.signIfOne(:k)+:c}+${:b})(${:k+:c}-${:b})}",value:"(${utils.signIfOne(:k)+:c}+${:b})(${:k+:c}-${:b})"},{name:"(ax+b)²-c²",vars:{a:"1_10",b:"-10_10_^0",c:["u","v","t","x","y","z"],d:"1_10"},question:"(${utils.signIfOne(:a)+:c}${utils.signedNumber(:b)})^2-${math.pow(:d,2)}",answer:":question=\\color{red}{(${utils.signIfOne(:a)+:c}${utils.signedNumber(:b+:d)})(${utils.signIfOne(:a)+:c}${utils.signedNumber(:b-:d)})}",value:"(${utils.signIfOne(:a)+:c}${utils.signedNumber(:b+:d)})(${utils.signIfOne(:a)+:c}${utils.signedNumber(:b-:d)})"}]}];